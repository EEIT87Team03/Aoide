<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Player</title>
</head>
<body>
	<div>
		<audio src = "#" id = "track" controls>
			<p>Sorry but audio is not supported in your browser.</p>
		</audio>
	</div>
<script>
var wsUri = "ws://localhost:8080/Aoide/play";
var clientSocket = new WebSocket( wsUri );
var audio = document.getElementById( "track" );
var currentTrack = null;
var trackArray = [];
clientSocket.onmessage = onMessage;

function onMessage( event )
{
	var message = event.data;
	if ( message.indexOf( "[INIT_TIME]" ) == 0 )
	{
		audio.initialTime = message.slice( 13, message.length );
	}
	else
	{
		var track = JSON.parse( message );
		trackArray.push( track );
		
		
		audio.src = track.songFile;
		audio.volume = 0.09;
		audio.play();
	}
	
}

</script>
</body>
</html>